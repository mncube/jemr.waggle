% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/matching.R
\name{build_analysis_sets}
\alias{build_analysis_sets}
\title{Build complete-case and IPCW analysis sets from a matched sample}
\usage{
build_analysis_sets(
  out_data,
  orig_matched_data,
  outcome_var = ASSESS_SCORE_out,
  censor_formula = obs ~ ASSESS_SCORE + NCES_PUBLIC_PCTFRLUNCH_ROUNDED + ETHNICITY_White
    + ETHNICITY_Hispanic + ETHNICITY_Black + ETHNICITY_Other + URBAN_LOC_21 + GENDER_MALE,
  match_ratio = 2,
  trim = 0.01
)
}
\arguments{
\item{out_data}{A wide data frame from \code{pwide()} containing both
baseline (\verb{*_base}) and outcome (\verb{*_out}) columns.}

\item{orig_matched_data}{A data frame of units matched \emph{before} outcomes
were released (e.g. \code{matdat_loc}), with the
treatment indicator \code{treat}.}

\item{outcome_var}{Unquoted name of the *_out column holding the
outcome (default \code{ASSESS_SCORE_out}).}

\item{censor_formula}{A formula for the IPCW model using \strong{baseline}
covariates available at matching time.}

\item{match_ratio}{Matching ratio used when the set was created
(2 for 1 : 2 matching).}

\item{trim}{Lower & upper trimming factor for IPC weights
(default 0.01 ⇒ weights capped at 1/0.01 = 100).}
}
\value{
A list with two tibbles:
\itemize{
\item \verb{$full}  – every originally-matched unit with weights & \code{obs} flag.
\item \verb{$cc}    – the complete-case subset (\code{obs == TRUE}), ready for analysis.
}
}
\description{
Build complete-case and IPCW analysis sets from a matched sample
}
